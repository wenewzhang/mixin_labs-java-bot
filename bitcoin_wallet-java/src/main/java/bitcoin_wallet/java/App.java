/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package bitcoin_wallet.java;

import mixin.java.sdk.MixinHttpUtil;
import mixin.java.sdk.MixinAPI;
import java.security.PrivateKey;
import java.security.interfaces.RSAPrivateKey;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;

public class App {
    public String getGreeting() {
        return "Hello world.";
    }

    public static void main(String[] args) {
        System.out.println(new App().getGreeting());
        MixinAPI mixinApi = new MixinAPI(Config.CLIENT_ID, Config.CLIENT_SECRET,
                                         Config.PIN, Config.SESSION_ID, Config.PIN_TOKEN,
                                         Config.RSA_PRIVATE_KEY);
        JsonObject assets = mixinApi.getAssets();
        // String assets = MixinHttpUtil.getAssets(Config.RSA_PRIVATE_KEY, Config.CLIENT_ID, Config.SESSION_ID);
        // System.out.println(assets);
        // JsonParser parser = new JsonParser();
        // JsonElement jsonTree = parser.parse(assets);
        // if(jsonTree.isJsonObject()) {
         // JsonObject jsonObject = jsonTree.getAsJsonObject();
         // System.out.println(jsonObject.get("data"));
         // System.out.println(jsonObject.get("data").isJsonArray());
         // JsonArray jsonAry = jsonObject.get("data").
         assets.get("data").getAsJsonArray().forEach((element) ->  {
           JsonObject jsonObj = element.getAsJsonObject();
           System.out.println(jsonObj.get("asset_id").getAsString() + " " +
                              jsonObj.get("symbol").getAsString() + " " +
                              jsonObj.get("balance").getAsString() );
           // System.out.println(element);
         });
       // }
    }
}
